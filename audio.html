<!DOCTYPE HTML>
<html>
  <head>
    <title>record audio</title>
    <meta charset="UTF-8">
<style type="text/css">
li { margin: 10px 0; }
li[title] { color: gray; }
audio { vertical-align: middle; }
span.hide { visibility: hidden; }
</style>
  </head>
  <body>
<h1>Record audio of your name</h1>
<h2>Instructions</h2>
<ol>
<li>Make a recording of yourself pronouncing your name.
Try to be brief; a name takes only a second or two to say.
Trim empty space at the start and end of your name.
<br>
<br>
Here are some websites that allow you to do this:
<ul>
<li><a href="https://www.rev.com/onlinevoicerecorder">https://www.rev.com/onlinevoicerecorder</a></li>
<li><a href="https://vocaroo.com/">https://vocaroo.com/</a></li>
<li><a href="https://online-voice-recorder.com/">https://online-voice-recorder.com/</a></li>
</ul>
Download the recording into a file on your computer.
</li>
<li>Upload the file you just saved:
<input type="file" accept="audio/*" capture id="recorder">
<br>
File sizes:
<span id="file_size">No file chosen</span>.
<span class="hide" id="cond_display">
If the file size is more than about two hundred thousand (200,000),
please choose a smaller file.
</span>
</li>
<li>Replay to make sure you sound okay:
<audio id="player" controls></audio>
If you don't like it, go back to step 1 and record again.
</li>
<li title="Not yet implemented">Save your recording and then close this tab.
<button disabled>Save</button>
</li>
</ol>
<script>
  const recorder = document.getElementById('recorder');
  const player = document.getElementById('player');
  const file_size = document.getElementById('file_size');

  recorder.addEventListener('change', function(e) {
    const file = e.target.files[0];
    //const url = URL.createObjectURL(file);
    //player.src = url;
    // let blob = await fetch(url).then(r => r.blob());
    const reader = new FileReader();
    reader.addEventListener('load', function() {
      const url = reader.result;
      player.src = url;
      file_size.innerText =
        file.size.toLocaleString()
        + '; '
        + url.length.toLocaleString();
      if (url.length > 200000) {
        document.getElementById('cond_display').classList.remove('hide');
      }
    }, false);
    reader.readAsDataURL(file);
  });
</script>
  </body>
</html>
